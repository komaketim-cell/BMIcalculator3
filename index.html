<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุญุงุณุจูโฺฏุฑ BMI ุญุฑููโุง ุจุง ฺฏุฒุงุฑุด PDF</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- ุตูุญู ูุฑูุฏ -->
    <div class="page active" id="input-page">
        <div class="container">
            <div class="header">
                <div class="logo-container">
                    <img src="logo.png" alt="Logo" class="logo">
                </div>
                <h1>ูุญุงุณุจูโฺฏุฑ BMI ู ุณูุงูุช ุจุฏู</h1>
                <p class="subtitle">ุงุจุฒุงุฑ ุชุฎุตุต ูุญุงุณุจู ุดุงุฎุต ุชูุฏู ุจุฏู ุจุง ุงุณุชุงูุฏุงุฑุฏ WHO</p>
            </div>

            <div id="error-message" class="error-message"></div>

            <div class="card">
                <div class="form-group">
                    <label>ุฌูุณุช</label>
                    <select id="gender">
                        <option value="ูุฑุฏ">ูุฑุฏ</option>
                        <option value="ุฒู">ุฒู</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>ุชุงุฑุฎ ุชููุฏ ุดูุณ (ุฌูุงู)</label>
                    <div class="date-inputs">
                        <input type="number" id="birth-year" placeholder="ุณุงู (ูุซุงู: 1380)" min="1300" max="1404">
                        <input type="number" id="birth-month" placeholder="ูุงู (1-12)" min="1" max="12">
                        <input type="number" id="birth-day" placeholder="ุฑูุฒ (1-31)" min="1" max="31">
                    </div>
                </div>

                <div class="form-group">
                    <label>ูุฏ (ุณุงูุชโูุชุฑ)</label>
                    <input type="number" id="height" placeholder="ูุซุงู: 175" step="0.1">
                </div>

                <div class="form-group">
                    <label>ูุฒู (ฺฉููฺฏุฑู)</label>
                    <input type="number" id="weight" placeholder="ูุซุงู: 70" step="0.1">
                </div>

                <div class="form-group">
                    <label>ูุฒุงู ูุนุงูุช ุฑูุฒุงูู</label>
                    <select id="activity">
                        <option value="1.2">ฺฉูโุชุญุฑฺฉ (ุจุฏูู ูุฑุฒุด)</option>
                        <option value="1.375">ูุนุงูุช ุณุจฺฉ (ูุฑุฒุด 1-3 ุจุงุฑ ุฏุฑ ููุชู)</option>
                        <option value="1.55" selected>ูุนุงูุช ูุชูุณุท (ูุฑุฒุด 3-5 ุจุงุฑ ุฏุฑ ููุชู)</option>
                        <option value="1.725">ูุนุงูุช ุณูฺฏู (ูุฑุฒุด 6-7 ุจุงุฑ ุฏุฑ ููุชู)</option>
                        <option value="1.9">ูุนุงูุช ุจุณุงุฑ ุณูฺฏู (ูุฑุฒุด ุญุฑููโุง)</option>
                    </select>
                </div>
            </div>

            <button id="calc-btn" class="btn btn-primary">ูุญุงุณุจู ุดุงุฎุตโูุง</button>
            <button id="help-btn" class="btn btn-secondary">ุฑุงูููุง ุงุณุชูุงุฏู</button>

            <div class="motivation-box">
                <p id="motivation-text">ุชุบุฑุงุช ฺฉูฺฺฉุ ูุชุงุฌ ุจุฒุฑฺฏ ูโุณุงุฒูุฏ ๐ฏ</p>
            </div>

            <footer class="footer">
                <img src="logo.png" alt="Logo" class="footer-logo">
                <p>ุทุฑุงุญ ู ุชูุณุนู ุจุง โค๏ธ | ุชูุงู ุญููู ูุญููุธ ุงุณุช</p>
            </footer>
        </div>
    </div>

    <!-- ุตูุญู ูุชุงุฌ -->
    <div class="page" id="results-page">
        <div class="container">
            <div class="header">
                <h1>ฺฏุฒุงุฑุด ุชุญูู ุณูุงูุช ุจุฏู</h1>
                <p class="subtitle">ูุชุงุฌ ูุญุงุณุจุงุช ุจุฑ ุงุณุงุณ ุงุณุชุงูุฏุงุฑุฏูุง ุนูู</p>
            </div>

            <div class="card">
                <h3>ุงุทูุงุนุงุช ูุฑุฏ</h3>
                <div class="info-grid">
                    <div><strong>ุฌูุณุช:</strong> <span id="r-gender"></span></div>
                    <div><strong>ูุฏ:</strong> <span id="r-height"></span></div>
                    <div><strong>ูุฒู:</strong> <span id="r-weight"></span></div>
                    <div><strong>ุณู ุฏูู:</strong> <span id="r-age"></span></div>
                </div>
            </div>

            <div class="card">
                <h3>ุดุงุฎุต ุชูุฏู ุจุฏู (BMI)</h3>
                <div class="bmi-result">
                    <div class="bmi-circle" id="bmi-circle">
                        <span id="bmi-value">--</span>
                    </div>
                    <div class="bmi-details">
                        <div class="status-badge" id="bmi-status-text">ุฏุฑ ุญุงู ูุญุงุณุจู...</div>
                        <p id="bmi-difference-text"></p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>ูุฒู ุณุงูู ู ูุชุงุจููุณู</h3>
                <div class="info-grid">
                    <div><strong>ูุญุฏูุฏู ูุฒู ุณุงูู:</strong> <span id="r-healthy"></span></div>
                    <div><strong>ูุชุงุจููุณู ูพุงู (BMR):</strong> <span id="r-bmr"></span></div>
                    <div><strong>ฺฉุงูุฑ ุฑูุฒุงูู (TDEE):</strong> <span id="r-tdee"></span></div>
                </div>
                <div class="metabolism-section">
                    <div class="metabolism-item">
                        <span class="metabolism-label">ุญูุธ ูุฒู:</span>
                        <span class="metabolism-value" id="maintain-calories">-- kcal</span>
                    </div>
                    <div class="metabolism-item">
                        <span class="metabolism-label">ุงูุฒุงุด ูุฒู:</span>
                        <span class="metabolism-value" id="gain-calories">-- kcal</span>
                    </div>
                    <div class="metabolism-item">
                        <span class="metabolism-label">ฺฉุงูุด ูุฒู:</span>
                        <span class="metabolism-value" id="loss-calories">-- kcal</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>ุชูุตูโูุง ฺฉุงุฑุจุฑุฏ</h3>
                <div id="practical-tips" class="tips-container">
                    <!-- ูุญุชูุง ุชูุณุท JavaScript ูพุฑ ูโุดูุฏ -->
                </div>
            </div>

            <div class="button-group">
                <button id="back-btn" class="btn btn-secondary">ูุญุงุณุจู ูุฌุฏุฏ</button>
                <button id="help-btn2" class="btn btn-info">ุฑุงูููุง ุงุณุชูุงุฏู</button>
                <button onclick="generatePDF()" class="btn btn-success">ุฏุงูููุฏ ฺฏุฒุงุฑุด PDF</button>
            </div>

            <footer class="footer">
                <img src="logo.png" alt="Logo" class="footer-logo">
                <p>ุทุฑุงุญ ู ุชูุณุนู ุจุง โค๏ธ | ุชูุงู ุญููู ูุญููุธ ุงุณุช</p>
            </footer>
        </div>
    </div>

    <!-- ุตูุญู ุฑุงูููุง -->
    <div class="page" id="guide-page">
        <div class="container">
            <div class="header">
                <h1>ุฑุงูููุง ุงุณุชูุงุฏู</h1>
                <p class="subtitle">ุงุทูุงุนุงุช ฺฉุงูู ุฏุฑุจุงุฑู ุดุงุฎุตโูุง ู ูุญูู ุงุณุชูุงุฏู</p>
            </div>

            <div class="card">
                <h3>ุดุงุฎุต ุชูุฏู ุจุฏู (BMI) ฺุณุชุ</h3>
                <p>BMI ุง Body Mass Index ุดุงุฎุต ุงุณุช ฺฉู ูุณุจุช ูุฒู ุจู ูุฏ ุฑุง ุงูุฏุงุฒูโฺฏุฑ ูโฺฉูุฏ ู ุจุฑุง ุงุฑุฒุงุจ ูุถุนุช ูุฒู ุงุณุชูุงุฏู ูโุดูุฏ.</p>
                
                <h4>ุทุจููโุจูุฏ BMI ุจุฑุง ุจุฒุฑฺฏุณุงูุงู:</h4>
                <ul>
                    <li><strong>ฺฉูโูุฒู:</strong> BMI ฺฉูุชุฑ ุงุฒ 18.5</li>
                    <li><strong>ูุฑูุงู:</strong> BMI ุจู 18.5 ุชุง 24.9</li>
                    <li><strong>ุงุถุงููโูุฒู:</strong> BMI ุจู 25 ุชุง 29.9</li>
                    <li><strong>ฺุงู:</strong> BMI ุจุงูุง 30</li>
                </ul>

                <h4>ุงุณุชุงูุฏุงุฑุฏ WHO ุจุฑุง ฺฉูุฏฺฉุงู ู ููุฌูุงูุงู:</h4>
                <p>ุจุฑุง ุณูู 5 ุชุง 19 ุณุงูุ ุงุฒ ูููุฏุงุฑูุง ุฑุดุฏ WHO ู ูุญุงุณุจู Z-Score ุงุณุชูุงุฏู ูโุดูุฏ ฺฉู ุณู ู ุฌูุณุช ุฑุง ุฏุฑ ูุธุฑ ูโฺฏุฑุฏ.</p>
            </div>

            <div class="card">
                <h3>ูุชุงุจููุณู ูพุงู (BMR) ู ฺฉุงูุฑ ุฑูุฒุงูู (TDEE)</h3>
                <ul>
                    <li><strong>BMR:</strong> ฺฉุงูุฑ ููุฑุฏ ูุงุฒ ุจุฏู ุฏุฑ ุญุงูุช ุงุณุชุฑุงุญุช ฺฉุงูู</li>
                    <li><strong>TDEE:</strong> ฺฉู ฺฉุงูุฑ ููุฑุฏ ูุงุฒ ุฑูุฒุงูู ุจุง ุฏุฑ ูุธุฑ ฺฏุฑูุชู ูุนุงูุช ุจุฏู</li>
                    <li><strong>ฺฉุงูุฑ ุญูุธ ูุฒู:</strong> ูุตุฑู ฺฉุงูุฑ ุจุฑุงุจุฑ ุจุง TDEE</li>
                    <li><strong>ฺฉุงูุฑ ุงูุฒุงุด ูุฒู:</strong> TDEE + 300 ฺฉุงูุฑ</li>
                    <li><strong>ฺฉุงูุฑ ฺฉุงูุด ูุฒู:</strong> TDEE - 500 ฺฉุงูุฑ</li>
                </ul>
            </div>

            <div class="card">
                <h3>ูฺฉุงุช ููู</h3>
                <ul>
                    <li>ุงู ุงุจุฒุงุฑ ููุท ุจุฑุง ุณูู 5 ุณุงู ุจู ุจุงูุง ุทุฑุงุญ ุดุฏู ุงุณุช</li>
                    <li>ุชุงุฑุฎ ุชููุฏ ุจู ุตูุฑุช ุดูุณ (ุฌูุงู) ูุงุฑุฏ ุดูุฏ</li>
                    <li>ุจุฑุง ุชุดุฎุต ุฏูู ูุถุนุช ุณูุงูุช ุจุง ูพุฒุดฺฉ ูุดูุฑุช ฺฉูุฏ</li>
                    <li>BMI ุชููุง ฺฉ ุดุงุฎุต ุงุณุช ู ุนูุงูู ุฏฺฏุฑ ูุงููุฏ ุชูุฏู ุนุถูุงู ู ุชูุฒุน ฺุฑุจ ูุฒ ููู ูุณุชูุฏ</li>
                </ul>
            </div>

            <button id="back-guide-btn" class="btn btn-primary">ุจุงุฒฺฏุดุช ุจู ุตูุญู ุงุตู</button>

            <footer class="footer">
                <img src="logo.png" alt="Logo" class="footer-logo">
                <p>ุทุฑุงุญ ู ุชูุณุนู ุจุง โค๏ธ | ุชูุงู ุญููู ูุญููุธ ุงุณุช</p>
            </footer>
        </div>
    </div>

    <!-- ุชููุฏ PDF ุจุง html2pdf -->
    <script>
        function generatePDF() {
            const element = document.createElement('div');
            element.style.direction = 'rtl';
            element.style.fontFamily = 'Vazirmatn, sans-serif';
            element.style.padding = '15px';
            element.style.fontSize = '11px';
            element.style.lineHeight = '1.4';

            // ุงุณุชุฎุฑุงุฌ ุฏุงุฏูโูุง
            const gender = document.getElementById('r-gender').textContent;
            const height = document.getElementById('r-height').textContent;
            const weight = document.getElementById('r-weight').textContent;
            const age = document.getElementById('r-age').textContent;
            const bmiValue = document.getElementById('bmi-value').textContent;
            const bmiStatus = document.getElementById('bmi-status-text').textContent;
            const bmiDiff = document.getElementById('bmi-difference-text').textContent;
            const healthyWeight = document.getElementById('r-healthy').textContent;
            const bmr = document.getElementById('r-bmr').textContent;
            const tdee = document.getElementById('r-tdee').textContent;
            const maintain = document.getElementById('maintain-calories').textContent;
            const gain = document.getElementById('gain-calories').textContent;
            const loss = document.getElementById('loss-calories').textContent;
            
            // ุงุณุชุฎุฑุงุฌ ุชูุตูโูุง ฺฉุงุฑุจุฑุฏ
            const tipsElements = document.querySelectorAll('#practical-tips .tip-item');
            let tipsHTML = '';
            tipsElements.forEach(tip => {
                tipsHTML += `<p style="margin:3px 0; font-size:10px;">โฆ ${tip.textContent.replace('โฆ ', '')}</p>`;
            });

            const statusColor = document.getElementById('bmi-circle').style.backgroundColor || '#22C55E';

            element.innerHTML = `
                <div style="text-align:center; margin-bottom:15px; border-bottom:2px solid #333; padding-bottom:10px;">
                    <img src="logo.png" alt="Logo" style="width:50px; height:50px; margin-bottom:5px;">
                    <h2 style="margin:5px 0; font-size:16px; color:#1e293b;">ฺฏุฒุงุฑุด ุชุญูู ุณูุงูุช ุจุฏู</h2>
                    <p style="margin:3px 0; font-size:10px; color:#64748b;">ุชุงุฑุฎ: ${new Date().toLocaleDateString('fa-IR')}</p>
                </div>

                <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:10px;">
                    <div style="background:#f8fafc; padding:8px; border-radius:5px;">
                        <strong style="font-size:11px;">ุฌูุณุช:</strong> ${gender}
                    </div>
                    <div style="background:#f8fafc; padding:8px; border-radius:5px;">
                        <strong style="font-size:11px;">ูุฏ:</strong> ${height}
                    </div>
                    <div style="background:#f8fafc; padding:8px; border-radius:5px;">
                        <strong style="font-size:11px;">ูุฒู:</strong> ${weight}
                    </div>
                    <div style="background:#f8fafc; padding:8px; border-radius:5px;">
                        <strong style="font-size:11px;">ุณู ุฏูู:</strong> ${age}
                    </div>
                </div>

                <div style="background:${statusColor}15; border:2px solid ${statusColor}; border-radius:8px; padding:10px; margin-bottom:10px; text-align:center;">
                    <div style="font-size:28px; font-weight:bold; color:${statusColor}; margin-bottom:5px;">${bmiValue}</div>
                    <div style="background:${statusColor}; color:white; padding:4px 10px; border-radius:15px; display:inline-block; font-size:11px; margin-bottom:5px;">${bmiStatus}</div>
                    <p style="margin:5px 0; font-size:10px; color:#64748b;">${bmiDiff}</p>
                </div>

                <div style="background:#f8fafc; border-radius:8px; padding:10px; margin-bottom:10px;">
                    <h3 style="margin:0 0 8px 0; font-size:12px; color:#1e293b; border-bottom:1px solid #e2e8f0; padding-bottom:5px;">ูุฒู ุณุงูู ู ูุชุงุจููุณู</h3>
                    <div style="display:grid; grid-template-columns:1fr 1fr; gap:6px; font-size:10px;">
                        <div><strong>ูุญุฏูุฏู ูุฒู ุณุงูู:</strong> ${healthyWeight}</div>
                        <div><strong>ูุชุงุจููุณู ูพุงู (BMR):</strong> ${bmr}</div>
                        <div><strong>ฺฉุงูุฑ ุฑูุฒุงูู (TDEE):</strong> ${tdee}</div>
                    </div>
                </div>

                <div style="background:#f0f9ff; border:1px solid #3b82f6; border-radius:8px; padding:10px; margin-bottom:10px;">
                    <h3 style="margin:0 0 8px 0; font-size:12px; color:#1e293b; border-bottom:1px solid #bfdbfe; padding-bottom:5px;">ุจุฑูุงูู ฺฉุงูุฑ ุฑูุฒุงูู</h3>
                    <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:6px; font-size:10px; text-align:center;">
                        <div style="background:white; padding:6px; border-radius:5px;">
                            <div style="font-weight:bold; color:#3b82f6; margin-bottom:3px;">ุญูุธ ูุฒู</div>
                            <div style="font-size:12px; font-weight:bold;">${maintain}</div>
                        </div>
                        <div style="background:white; padding:6px; border-radius:5px;">
                            <div style="font-weight:bold; color:#10b981; margin-bottom:3px;">ุงูุฒุงุด ูุฒู</div>
                            <div style="font-size:12px; font-weight:bold;">${gain}</div>
                        </div>
                        <div style="background:white; padding:6px; border-radius:5px;">
                            <div style="font-weight:bold; color:#ef4444; margin-bottom:3px;">ฺฉุงูุด ูุฒู</div>
                            <div style="font-size:12px; font-weight:bold;">${loss}</div>
                        </div>
                    </div>
                </div>

                <div style="background:#fefce8; border:1px solid #eab308; border-radius:8px; padding:10px; margin-bottom:10px;">
                    <h3 style="margin:0 0 8px 0; font-size:12px; color:#1e293b; border-bottom:1px solid #fde047; padding-bottom:5px;">ุชูุตูโูุง ฺฉุงุฑุจุฑุฏ</h3>
                    <div style="font-size:10px; color:#422006;">
                        ${tipsHTML}
                    </div>
                </div>

                <div style="text-align:center; margin-top:15px; padding-top:10px; border-top:1px solid #e2e8f0; font-size:9px; color:#94a3b8;">
                    <p style="margin:3px 0;">โ๏ธ ุงู ฺฏุฒุงุฑุด ููุท ุฌูุจู ุงุทูุงุนโุฑุณุงู ุฏุงุฑุฏ ู ุฌุงฺฏุฒู ูุดุงูุฑู ูพุฒุดฺฉ ูุณุช</p>
                    <p style="margin:3px 0;">ุทุฑุงุญ ู ุชูุณุนู ุจุง โค๏ธ | ุชูุงู ุญููู ูุญููุธ ุงุณุช</p>
                </div>
            `;

            const opt = {
                margin: [8, 8, 8, 8],
                filename: `ฺฏุฒุงุฑุด-ุณูุงูุช-${new Date().getTime()}.pdf`,
                image: { type: 'jpeg', quality: 0.95 },
                html2canvas: { 
                    scale: 2,
                    useCORS: true,
                    logging: false,
                    letterRendering: true
                },
                jsPDF: { 
                    unit: 'mm', 
                    format: 'a4', 
                    orientation: 'portrait',
                    compress: true
                }
            };

            html2pdf().set(opt).from(element).save();
        }
    </script>

    <script src="who-lms-data.js"></script>
    <script src="bmi.js"></script>
</body>
</html>
